{"ast":null,"code":"var _jsxFileName = \"/Volumes/T7 Touch/PHP/API2022/reactapi2022/src/pages/LoginPage.jsx\",\n    _s = $RefreshSig$();\n\nimport { useState } from 'react';\nimport authAPI from '../services/authAPI';\nimport { useNavigate } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst LoginPage = props => {\n  _s();\n\n  const navigate = useNavigate();\n  const [credentials, setCredentials] = useState({\n    username: \"\",\n    password: \"\"\n  });\n  const [error, setError] = useState(\"\");\n\n  const handleChange = event => {\n    const value = event.currentTarget.value;\n    const name = event.currentTarget.name; // copie de l'objet credentials ... et la virgule permet de faire un ajout ou un remplacement\n    // si on laisse simplement name, il va venir écrire dans l'objet une prop name mais avec le crochet il va prendre la valeur de name (ex: username)\n\n    setCredentials({ ...credentials,\n      [name]: value\n    });\n  };\n\n  const handleSubmit = async event => {\n    event.preventDefault();\n\n    try {\n      await authAPI.authenticate(credentials);\n      setError(\"\");\n      props.onLogin(true);\n      navigate(\"/customers\", {\n        replace: true\n      });\n    } catch (error) {\n      setError(\"Aucun compte ne possède cette adresse e-mail ou les informations ne correspondent pas\");\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"row\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-4 offset-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          children: \"Connexion\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 44,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n          onSubmit: handleSubmit,\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-group my-3\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              htmlFor: \"username\",\n              children: \"Adresse E-mail\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 47,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"email\",\n              value: credentials.username,\n              onChange: handleChange,\n              placeholder: \"Adresse E-mail de connexion\",\n              name: \"username\",\n              id: \"username\",\n              className: \"form-control\" + (error && \" is-invalid\")\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 48,\n              columnNumber: 29\n            }, this), error && /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"invalid-feedback\",\n              children: error\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 58,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 46,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-group my-3\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              htmlFor: \"password\",\n              children: \"Mot de passe\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 62,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"password\",\n              value: credentials.password,\n              onChange: handleChange,\n              placeholder: \"Mot de passe\",\n              id: \"password\",\n              name: \"password\",\n              className: \"form-control\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 63,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 61,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-group my-3\",\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"btn btn-success\",\n              children: \"Connexion\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 74,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 73,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 45,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 43,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 13\n    }, this)\n  }, void 0, false);\n};\n\n_s(LoginPage, \"FMmVtmErmJtRmVHkZdVjox831FM=\", false, function () {\n  return [useNavigate];\n});\n\n_c = LoginPage;\nexport default LoginPage;\n\nvar _c;\n\n$RefreshReg$(_c, \"LoginPage\");","map":{"version":3,"sources":["/Volumes/T7 Touch/PHP/API2022/reactapi2022/src/pages/LoginPage.jsx"],"names":["useState","authAPI","useNavigate","LoginPage","props","navigate","credentials","setCredentials","username","password","error","setError","handleChange","event","value","currentTarget","name","handleSubmit","preventDefault","authenticate","onLogin","replace"],"mappings":"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","sourcesContent":["import {useState} from 'react';\nimport authAPI from '../services/authAPI';\nimport { useNavigate } from 'react-router-dom';\n\nconst LoginPage = (props) => {\n\n    const navigate = useNavigate()\n\n    const [credentials, setCredentials] = useState({\n        username: \"\",\n        password: \"\"\n    })\n\n    const [error, setError] = useState(\"\")\n\n    const handleChange = (event) => {\n        const value = event.currentTarget.value \n        const name = event.currentTarget.name\n\n        // copie de l'objet credentials ... et la virgule permet de faire un ajout ou un remplacement\n        // si on laisse simplement name, il va venir écrire dans l'objet une prop name mais avec le crochet il va prendre la valeur de name (ex: username)\n\n        setCredentials({...credentials, [name]:value})\n\n    }\n\n    const handleSubmit = async (event) => {\n        event.preventDefault()\n        try{\n            await authAPI.authenticate(credentials)\n            setError(\"\")\n            props.onLogin(true)\n            navigate(\"/customers\", {replace: true})\n        }catch(error)\n        {\n            setError(\"Aucun compte ne possède cette adresse e-mail ou les informations ne correspondent pas\")\n        }\n    }\n\n    return ( \n        <>\n            <div className=\"row\">\n                <div className=\"col-4 offset-4\">\n                    <h1>Connexion</h1>\n                    <form onSubmit={handleSubmit}>\n                        <div className=\"form-group my-3\">\n                            <label htmlFor=\"username\">Adresse E-mail</label>\n                            <input \n                                type=\"email\"\n                                value={credentials.username}\n                                onChange={handleChange}\n                                placeholder='Adresse E-mail de connexion'\n                                name=\"username\"\n                                id=\"username\"\n                                className={\"form-control\" + (error && \" is-invalid\")} \n                            />\n                            {error && (\n                                <p className='invalid-feedback'>{error}</p>\n                            )}\n                        </div>\n                        <div className=\"form-group my-3\">\n                            <label htmlFor=\"password\">Mot de passe</label>\n                            <input \n                                type=\"password\" \n                                value={credentials.password}\n                                onChange={handleChange}\n                                placeholder='Mot de passe'\n                                id=\"password\"\n                                name=\"password\"\n                                className='form-control'\n                            />\n                        </div>\n                        <div className=\"form-group my-3\">\n                            <button className='btn btn-success'>Connexion</button>\n                        </div>\n                    </form>\n                </div>\n            </div>\n        </>\n     );\n}\n \nexport default LoginPage;\n\n"]},"metadata":{},"sourceType":"module"}